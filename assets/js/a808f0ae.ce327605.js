"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[471],{3983:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>d,toc:()=>o});var i=s(4848),r=s(8453);const t={title:"Push Events"},l="Push Events",d={id:"Push-Events",title:"Push Events",description:"Liquid provides a comprehensive push events system that publishes real-time events to either Redis Pub/Sub or RabbitMQ message queues. This allows you to build reactive features and integrate with external services based on user actions and system events.",source:"@site/docs/Push-Events.md",sourceDirName:".",slug:"/Push-Events",permalink:"/Push-Events",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Push Events"},sidebar:"tutorialSidebar",previous:{title:"Understanding Access Control and Integrating with other Microservices",permalink:"/Understanding-Access-Control-and-Integrating-with-Other-Microservices"},next:{title:"Debugging Common Errors",permalink:"/Debugging-Common-Errors"}},a={},o=[{value:"Overview",id:"overview",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Enabling Push Events",id:"enabling-push-events",level:3},{value:"Queue Adapters",id:"queue-adapters",level:3},{value:"Redis Pub/Sub",id:"redis-pubsub",level:4},{value:"RabbitMQ",id:"rabbitmq",level:4},{value:"Backend Configuration",id:"backend-configuration",level:2},{value:"Redis Configuration Options",id:"redis-configuration-options",level:3},{value:"Redis Security Configuration",id:"redis-security-configuration",level:4},{value:"RabbitMQ Configuration Options",id:"rabbitmq-configuration-options",level:3},{value:"RabbitMQ Connection String Format",id:"rabbitmq-connection-string-format",level:4},{value:"RabbitMQ Security Configuration",id:"rabbitmq-security-configuration",level:4},{value:"Event Filtering",id:"event-filtering",level:3},{value:"Event Prefixing",id:"event-prefixing",level:3},{value:"Available Events",id:"available-events",level:2},{value:"User Events",id:"user-events",level:3},{value:"user.create",id:"usercreate",level:4},{value:"user.login",id:"userlogin",level:4},{value:"user.logout",id:"userlogout",level:4},{value:"user.logout-all",id:"userlogout-all",level:4},{value:"Social Events",id:"social-events",level:3},{value:"user.follow",id:"userfollow",level:4},{value:"user.follow-request",id:"userfollow-request",level:4},{value:"user.unfollow",id:"userunfollow",level:4},{value:"Email Events",id:"email-events",level:3},{value:"email.send",id:"emailsend",level:4},{value:"Event Structure",id:"event-structure",level:2},{value:"Consuming Events",id:"consuming-events",level:2},{value:"Redis Pub/Sub Example (Node.js)",id:"redis-pubsub-example-nodejs",level:3},{value:"RabbitMQ Example (Node.js)",id:"rabbitmq-example-nodejs",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Redis Dependencies",id:"redis-dependencies",level:3},{value:"RabbitMQ Dependencies",id:"rabbitmq-dependencies",level:3}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"push-events",children:"Push Events"})}),"\n",(0,i.jsxs)(n.p,{children:["Liquid provides a comprehensive push events system that publishes real-time events to either ",(0,i.jsx)(n.strong,{children:"Redis Pub/Sub"})," or ",(0,i.jsx)(n.strong,{children:"RabbitMQ"})," message queues. This allows you to build reactive features and integrate with external services based on user actions and system events."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"When enabled, Liquid publishes events to your configured message queue whenever significant actions occur in the system. These events can be consumed by your applications to trigger notifications, analytics, webhooks, or other reactive behaviors."}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"enabling-push-events",children:"Enabling Push Events"}),"\n",(0,i.jsxs)(n.p,{children:["To enable push events, you need to configure the following options in your ",(0,i.jsx)(n.code,{children:"app-config.service.json"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "privilege.can-use-push-events": true,\n  "system.queue-adapter": "redis",\n  "system.push-events": [\n    "user.follow",\n    "user.unfollow",\n    "user.follow-request",\n    "user.create",\n    "user.login",\n    "user.logout",\n    "user.logout-all",\n    "email.send"\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"queue-adapters",children:"Queue Adapters"}),"\n",(0,i.jsx)(n.p,{children:"Liquid supports two message queue adapters:"}),"\n",(0,i.jsx)(n.h4,{id:"redis-pubsub",children:"Redis Pub/Sub"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "system.queue-adapter": "redis",\n  "privilege.can-use-cache": true,\n  "redis.host": "127.0.0.1",\n  "redis.port": 6379,\n  "redis.channel-name": "liquid"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"rabbitmq",children:"RabbitMQ"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "system.queue-adapter": "rabbitmq",\n  "privilege.can-use-rabbitmq": true,\n  "rabbitmq.connectionString": "amqp://localhost:5672",\n  "rabbitmq.channel-name": "liquid"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"backend-configuration",children:"Backend Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"redis-configuration-options",children:"Redis Configuration Options"}),"\n",(0,i.jsx)(n.p,{children:"All Redis configuration options for Liquid:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "privilege.can-use-cache": true,\n  "redis.host": "127.0.0.1",\n  "redis.port": 6379,\n  "redis.username": "",\n  "redis.password": "",\n  "redis.db": 0,\n  "redis.key-prefix": "",\n  "redis.channel-name": "liquid"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Configuration Details:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"privilege.can-use-cache"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Enables Redis caching and pub/sub functionality"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redis.host"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"127.0.0.1"'})}),(0,i.jsx)(n.td,{children:"Redis server hostname or IP address"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redis.port"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"6379"})}),(0,i.jsx)(n.td,{children:"Redis server port number"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redis.username"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'""'})}),(0,i.jsx)(n.td,{children:"Redis username (Redis 6.0+)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redis.password"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'""'})}),(0,i.jsx)(n.td,{children:"Redis password for authentication"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redis.db"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"0"})}),(0,i.jsx)(n.td,{children:"Redis database number (0-15)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redis.key-prefix"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'""'})}),(0,i.jsx)(n.td,{children:"Prefix for all Redis keys"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redis.channel-name"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"liquid"'})}),(0,i.jsx)(n.td,{children:"Channel name for pub/sub events"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"redis-security-configuration",children:"Redis Security Configuration"}),"\n",(0,i.jsx)(n.p,{children:"For production deployments, configure Redis with authentication:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Redis Configuration (",(0,i.jsx)(n.code,{children:"redis.conf"}),"):"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-conf",children:'# Enable authentication\nrequirepass your-strong-password\n\n# Bind to specific interface (not 0.0.0.0 in production)\nbind 127.0.0.1\n\n# Disable dangerous commands\nrename-command FLUSHDB ""\nrename-command FLUSHALL ""\nrename-command CONFIG ""\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Liquid Configuration:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "redis.host": "your-redis-host",\n  "redis.port": 6379,\n  "redis.password": "your-strong-password"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"rabbitmq-configuration-options",children:"RabbitMQ Configuration Options"}),"\n",(0,i.jsx)(n.p,{children:"All RabbitMQ configuration options for Liquid:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "privilege.can-use-rabbitmq": true,\n  "rabbitmq.connectionString": "amqp://username:password@localhost:5672",\n  "rabbitmq.channel-name": "liquid"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Configuration Details:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"privilege.can-use-rabbitmq"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Enables RabbitMQ functionality"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rabbitmq.connectionString"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"amqp://localhost:5672"'})}),(0,i.jsx)(n.td,{children:"Full RabbitMQ connection string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rabbitmq.channel-name"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"liquid"'})}),(0,i.jsx)(n.td,{children:"Queue name for events"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"rabbitmq-connection-string-format",children:"RabbitMQ Connection String Format"}),"\n",(0,i.jsx)(n.p,{children:"The connection string supports various formats:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Basic connection\namqp://localhost:5672\n\n# With authentication\namqp://username:password@localhost:5672\n\n# With vhost\namqp://username:password@localhost:5672/vhost\n\n# SSL/TLS connection\namqps://username:password@localhost:5671\n\n# With connection parameters\namqp://username:password@localhost:5672?heartbeat=60&connection_timeout=10000\n"})}),"\n",(0,i.jsx)(n.h4,{id:"rabbitmq-security-configuration",children:"RabbitMQ Security Configuration"}),"\n",(0,i.jsx)(n.p,{children:"For production deployments, configure secure RabbitMQ connections:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Production Configuration:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "rabbitmq.connectionString": "amqp://liquid_user:strong_password@rabbitmq-server:5672/liquid_vhost"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"event-filtering",children:"Event Filtering"}),"\n",(0,i.jsxs)(n.p,{children:["You can control which events are published by configuring the ",(0,i.jsx)(n.code,{children:"system.push-events"})," array. Only events listed in this array will be published to the queue."]}),"\n",(0,i.jsx)(n.h3,{id:"event-prefixing",children:"Event Prefixing"}),"\n",(0,i.jsx)(n.p,{children:"You can add a prefix to all event names by setting:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "system.push-events.prefix": "myapp."\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This will prefix all events (e.g., ",(0,i.jsx)(n.code,{children:"user.login"})," becomes ",(0,i.jsx)(n.code,{children:"myapp.user.login"}),")."]}),"\n",(0,i.jsx)(n.h2,{id:"available-events",children:"Available Events"}),"\n",(0,i.jsx)(n.h3,{id:"user-events",children:"User Events"}),"\n",(0,i.jsx)(n.h4,{id:"usercreate",children:"user.create"}),"\n",(0,i.jsx)(n.p,{children:"Published when a new user account is created."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "user.create",\n  "data": {\n    "user": {\n      "_id": "user_id",\n      "username": "john_doe",\n      "email": "john@example.com",\n      "firstName": "John",\n      "lastName": "Doe",\n      "verified": false,\n      "role": "user",\n      "credits": 100,\n      "scope": ["user:profile:read"],\n      "createdAt": "2023-01-01T10:00:00.000Z"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"userlogin",children:"user.login"}),"\n",(0,i.jsx)(n.p,{children:"Published when a user successfully logs in (both password and OAuth logins)."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "user.login",\n  "data": {\n    "user": {\n      "_id": "user_id",\n      "username": "john_doe",\n      "email": "john@example.com",\n      "firstName": "John",\n      "lastName": "Doe"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"userlogout",children:"user.logout"}),"\n",(0,i.jsx)(n.p,{children:"Published when a user logs out from a single session."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "user.logout",\n  "data": {\n    "user": {\n      "_id": "user_id",\n      "username": "john_doe",\n      "email": "john@example.com",\n      "firstName": "John",\n      "lastName": "Doe"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"userlogout-all",children:"user.logout-all"}),"\n",(0,i.jsx)(n.p,{children:"Published when a user logs out from all sessions."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "user.logout-all",\n  "data": {\n    "user": {\n      "_id": "user_id",\n      "username": "john_doe",\n      "email": "john@example.com",\n      "firstName": "John",\n      "lastName": "Doe"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"social-events",children:"Social Events"}),"\n",(0,i.jsx)(n.h4,{id:"userfollow",children:"user.follow"}),"\n",(0,i.jsx)(n.p,{children:"Published when a user successfully follows another user (for public profiles)."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "user.follow",\n  "data": {\n    "source": "follower_user_id",\n    "target": "followed_user_id"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"userfollow-request",children:"user.follow-request"}),"\n",(0,i.jsx)(n.p,{children:"Published when a user requests to follow a private profile."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "user.follow-request",\n  "data": {\n    "source": "requester_user_id",\n    "target": "target_user_id"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"userunfollow",children:"user.unfollow"}),"\n",(0,i.jsx)(n.p,{children:"Published when a user unfollows another user."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "user.unfollow",\n  "data": {\n    "source": "unfollower_user_id",\n    "target": "unfollowed_user_id"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"email-events",children:"Email Events"}),"\n",(0,i.jsx)(n.h4,{id:"emailsend",children:"email.send"}),"\n",(0,i.jsx)(n.p,{children:"Published when an email is sent through the Pusher email adapter. This is useful for implementing custom email sending logic."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "uuid-v4",\n  "name": "email.send",\n  "data": {\n    "email": {\n      "to": "recipient@example.com",\n      "from": {\n        "email": "noreply@yourapp.com",\n        "name": "Your App"\n      },\n      "subject": "Welcome to Your App",\n      "text": "Plain text content",\n      "html": "<h1>HTML content</h1>",\n      "templateId": "template_id",\n      "dynamicTemplateData": {\n        "name": "John",\n        "verification_url": "https://yourapp.com/verify?token=abc123"\n      },\n      "timestamp": "2023-01-01T10:00:00.000Z"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"email.send"})," event is only published when using the ",(0,i.jsx)(n.code,{children:"pusher"})," email adapter. Configure this by setting ",(0,i.jsx)(n.code,{children:"system.email-adapter"})," to ",(0,i.jsx)(n.code,{children:'"pusher"'})," in your backend configuration."]})}),"\n",(0,i.jsx)(n.h2,{id:"event-structure",children:"Event Structure"}),"\n",(0,i.jsx)(n.p,{children:"All events follow a consistent structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "unique-uuid-v4-identifier",\n  "name": "event.name",\n  "data": {\n    // Event-specific data\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"id"}),": A unique UUID v4 identifier for each event"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"name"}),": The event name (with optional prefix)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"data"}),": Event-specific payload containing relevant information"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"consuming-events",children:"Consuming Events"}),"\n",(0,i.jsx)(n.h3,{id:"redis-pubsub-example-nodejs",children:"Redis Pub/Sub Example (Node.js)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const Redis = require("ioredis");\nconst redis = new Redis({\n  host: "localhost",\n  port: 6379,\n});\n\nredis.subscribe("liquid");\n\nredis.on("message", (channel, message) => {\n  const event = JSON.parse(message);\n\n  switch (event.name) {\n    case "user.login":\n      console.log(`User ${event.data.user.username} logged in`);\n      break;\n    case "user.follow":\n      console.log(`User ${event.data.source} followed ${event.data.target}`);\n      break;\n    case "email.send":\n      // Custom email sending logic\n      sendCustomEmail(event.data.email);\n      break;\n  }\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"rabbitmq-example-nodejs",children:"RabbitMQ Example (Node.js)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const amqp = require("amqplib");\n\nasync function consumeEvents() {\n  const connection = await amqp.connect("amqp://localhost");\n  const channel = await connection.createChannel();\n  const queue = "liquid";\n\n  await channel.assertQueue(queue);\n\n  channel.consume(queue, (message) => {\n    if (message) {\n      const event = JSON.parse(message.content.toString());\n\n      switch (event.name) {\n        case "user.create":\n          console.log(`New user created: ${event.data.user.username}`);\n          break;\n        case "user.logout-all":\n          console.log(`User ${event.data.user.username} logged out from all sessions`);\n          break;\n      }\n\n      channel.ack(message);\n    }\n  });\n}\n\nconsumeEvents();\n'})}),"\n",(0,i.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Dependency"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Used For"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Redis"}),(0,i.jsx)(n.td,{children:"Optional"}),(0,i.jsx)(n.td,{children:"Redis Pub/Sub adapter and caching"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RabbitMQ"}),(0,i.jsx)(n.td,{children:"Optional"}),(0,i.jsx)(n.td,{children:"RabbitMQ message queue adapter"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"redis-dependencies",children:"Redis Dependencies"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For Redis Pub/Sub:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensure ",(0,i.jsx)(n.code,{children:"privilege.can-use-cache"})," is enabled"]}),"\n",(0,i.jsx)(n.li,{children:"Redis connection must be properly configured"}),"\n",(0,i.jsx)(n.li,{children:"Uses the same Redis instance as Liquid's caching system"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rabbitmq-dependencies",children:"RabbitMQ Dependencies"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"For RabbitMQ:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensure ",(0,i.jsx)(n.code,{children:"privilege.can-use-rabbitmq"})," is enabled"]}),"\n",(0,i.jsx)(n.li,{children:"RabbitMQ connection string must be properly configured"}),"\n",(0,i.jsx)(n.li,{children:"Independent message queue system"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Events are published asynchronously and won't block the main API response. However, if the message queue is unavailable, events will be silently dropped. Ensure your message queue infrastructure is reliable for production use."})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Event payloads may contain sensitive user information. Ensure your message queue and event consumers are properly secured, especially in production environments."})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);